(window.webpackJsonp=window.webpackJsonp||[]).push([[5,7],{457:function(e,t,o){"use strict";o.r(t),o.d(t,"NotePreview",(function(){return y}));var n=o(0),i=o.n(n),s=o(147),r=o(210),a=o(452),l=o.n(a),c=o(453),d=o.n(c),u=o(6),h={type:"output",regex:'<input type="checkbox" disabled',replace:'<input type="checkbox" '},p=e=>o.e(18).then(o.t.bind(null,933,7)).then(t=>{var{default:o}=t;o.extension("enableCheckboxes",h);var n=new o.Converter({extensions:["enableCheckboxes"]});n.setFlavor("github"),n.setOption("simpleLineBreaks",!1),n.setOption("ghMentions",!1),n.setOption("smoothLivePreview",!0),n.setOption("tables",!0),n.setOption("strikethrough",!0);var i=e.replace(/([ \t\u2000-\u200a]*)\u2022(\s)/gm,"$1-$2");return(e=>{for(var t=(new DOMParser).parseFromString(e,"text/html"),o=t.createTreeWalker(t.body,NodeFilter.SHOW_ALL,null,!1),n=[],i=[],s=function(){var e=o.currentNode;if((e=>{switch(e.nodeName.toLowerCase()){case"head":case"html":case"iframe":case"link":case"meta":case"object":case"script":case"style":return!0;default:return!1}})(e))return i.push(e),"continue";if(!(e=>{var t=e.nodeName.toLowerCase();if("input"===t)return"checkbox"===e.getAttribute("type");switch(t){case"#text":case"a":case"article":case"b":case"br":case"blockquote":case"cite":case"code":case"dd":case"del":case"div":case"dt":case"em":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":case"hr":case"i":case"img":case"ins":case"kbd":case"li":case"ol":case"p":case"pre":case"s":case"span":case"strong":case"sub":case"sup":case"table":case"tbody":case"td":case"th":case"thead":case"tr":case"tt":case"ul":return!0;default:return!1}})(e))return n.push(e),"continue";var t=e.nodeName.toLowerCase();Object(u.filter)(e.attributes,e=>{var{name:o,value:n}=e;return!((e,t,o)=>{switch(e){case"a":switch(t){case"href":return["http","https","simplenote"].includes(o.toLowerCase().trim().split("://")[0]);case"alt":case"rel":case"title":return!0;default:return!1}case"img":switch(t){case"alt":case"src":case"title":case"width":return!0;default:return!1}case"input":switch(t){case"disabled":case"checked":case"type":return!0;default:return!1}case"li":switch(t){case"class":switch(o){case"task-list-item":return!0;default:return!1}default:return!1}case"ol":switch(t){case"start":return!0;default:return!1}case"th":case"td":switch(t){case"style":switch(o){case"text-align:center;":case"text-align:left;":case"text-align:right;":return!0;default:return!1}default:return!1}default:return!1}})(t,o,n)&&(("href"!==o&&"src"!==o||!d.a.isWebUri(n))&&("href"!==o||!n.startsWith("mailto:")||!l.a.validate(n.slice(7))))}).forEach(t=>{var{name:o}=t;return e.removeAttribute(o)});var s="a"===t&&e.getAttribute("href");"a"!==t||"string"!=typeof s||s.startsWith("mailto:")||(e.setAttribute("target","_blank"),e.setAttribute("rel","external noopener noreferrer")),"li"===t&&"task-list-item"===e.getAttribute("class")&&e.setAttribute("style","list-style: none;")};o.nextNode();)s();return i.forEach(e=>{try{var t;null==e||null===(t=e.parentNode)||void 0===t||t.removeChild(e)}catch(e){}}),n.forEach(e=>{var t,o=e.parentNode;try{for(;t=e.firstChild;)null==o||o.insertBefore(t,e);null==o||o.removeChild(e)}catch(e){}}),t.body.innerHTML})(n.makeHtml(i))}),g=(e,t)=>{var o=e.parentNode;t.forEach(e=>{o.childNodes.forEach(o=>{var n,i,s;if(o.nodeType===Node.TEXT_NODE&&null!==(n=o.textContent)&&void 0!==n&&n.toLocaleLowerCase().includes(e)){var r=null===(i=o.textContent)||void 0===i?void 0:i.toLocaleLowerCase().indexOf(e),a=o.splitText(r),l=a.splitText(e.length),c=document.createElement("span");c.setAttribute("class","search-match"),null===(s=a.parentNode)||void 0===s||s.replaceChild(c,a),c.appendChild(a),g(l,t)}})})},m=(e,t,n)=>p(t).then(t=>(e.innerHTML=t,e)).then(e=>{if(!n)return e.querySelectorAll("pre code");var t=Object(r.a)(n).map(e=>e.toLocaleLowerCase());if(!t.length)return e.querySelectorAll("pre code");for(var o=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,{acceptNode:function(e){return t.some(t=>{var o;return null===(o=e.textContent)||void 0===o?void 0:o.toLocaleLowerCase().includes(t)})?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}},!1),i=[],s=o.currentNode;s;)i.push(s),s=o.nextNode();return i.forEach(e=>g(e,t)),e.querySelectorAll("pre code")}).then(e=>{if(e.length)return o.e(13).then(o.t.bind(null,932,7)).then(t=>{var{default:o}=t;e.forEach(o.highlightBlock)}).catch()}),v=o(35),f=o(251),b=o(157),y=e=>{var t,{editNote:o,isFocused:s,note:r,noteId:a,notes:l,openNote:c,searchQuery:d,showRenderedView:u}=e,h=Object(n.useRef)();return Object(n.useEffect)(()=>{var e=e=>{if(!s)return!0;if(!document.getSelection().isCollapsed)return!0;var t=document.createElement("div");m(t,r.content,d).then(()=>{try{e.clipboardData.setData("text/plain",t.innerHTML)}catch(e){navigator.clipboard.writeText(t.innerHTML)}}),e.preventDefault()};return document.addEventListener("copy",e,!1),()=>document.removeEventListener("copy",e,!1)},[s,d]),Object(n.useEffect)(()=>{var e,t=e=>{for(var t=e.target;null!==t;t=t.parentNode){if("A"===t.tagName){e.preventDefault(),e.stopPropagation();var n=t;if(n.href.startsWith("simplenote://note/")){var i=/^simplenote:\/\/note\/(.+)$/.exec(n.href);if(!i)return;var[s,d]=i;return void(l.has(d)&&c(d))}return void(n.href.startsWith("http://localhost")||Object(v.a)(n.href))}if("task-list-item"===t.className){var u=function(){e.preventDefault(),e.stopPropagation();var n=h.current.querySelectorAll("[data-markdown-root] .task-list-item"),i=Array.prototype.indexOf.call(n,t),s=0,l=r.content.replace(/(- \[x\]|- \[ \])/g,e=>s++===i?"- [ ]"===e?"- [x]":"- [ ]":e);return o(a,{content:l}),{v:void 0}}();if("object"==typeof u)return u.v}}};return null===(e=h.current)||void 0===e||e.addEventListener("click",t,!0),()=>{var e;return null===(e=h.current)||void 0===e?void 0:e.removeEventListener("click",t,!0)}},[r]),Object(n.useEffect)(()=>{var e;h.current&&(null!=r&&r.content&&u?m(h.current,r.content,d):h.current.innerText=Object(f.a)(null!==(e=null==r?void 0:r.content)&&void 0!==e?e:""))},[null==r?void 0:r.content,d,u]),i.a.createElement("div",{className:"note-detail-wrapper"},i.a.createElement("div",{className:"note-detail note-detail-preview"},i.a.createElement("div",{ref:h,className:"note-detail-markdown theme-color-bg theme-color-fg","data-markdown-root":!0},i.a.createElement("div",{style:{whiteSpace:"pre"}},!u&&Object(f.a)(null!==(t=null==r?void 0:r.content)&&void 0!==t?t:"")))))},S={editNote:b.a.data.editNote,openNote:b.a.ui.selectNote};t.default=Object(s.b)((e,t)=>{var o,n,i=null!==(o=t.noteId)&&void 0!==o?o:e.ui.openedNote,s=null!==(n=t.note)&&void 0!==n?n:e.data.notes.get(i);return{isFocused:0===e.ui.dialogs.length&&!e.ui.showNoteInfo,note:s,noteId:i,notes:e.data.notes,searchQuery:e.ui.searchQuery,showRenderedView:!(null==s||!s.systemTags.includes("markdown")||e.ui.editMode)}},S)(y)},939:function(e,t,o){"use strict";o.r(t),o.d(t,"NoteEditor",(function(){return U}));var n=o(2),i=o.n(n),s=o(0),r=o.n(s),a=o(147),l=o(308);function c(){return r.a.createElement("svg",{className:"icon-chevron-right",xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",viewBox:"0 0 24 24"},r.a.createElement("rect",{x:"0",fill:"none",width:"24",height:"24"}),r.a.createElement("g",null,r.a.createElement("polygon",{points:"10.11 21.19 8.7 19.78 16.48 12 8.7 4.22 10.11 2.81 19.3 12 10.11 21.19"})))}var d=e=>{var{selectedSearchMatchIndex:t,numberOfMatchesInNote:o,setSearchSelection:n}=e;return r.a.createElement("div",{className:"search-results"},r.a.createElement("div",null,null===t?"".concat(o," Results"):"".concat(t+1," of ").concat(o)),r.a.createElement("span",{className:"search-results-next"},r.a.createElement(l.a,{disabled:o<=1,icon:r.a.createElement(c,null),onClick:e=>{n((o+(null!=t?t:-1)+1)%o)},title:"Next"})),r.a.createElement("span",{className:"search-results-prev"},r.a.createElement(l.a,{disabled:o<=1,icon:r.a.createElement(c,null),onClick:e=>{n((o+(null!=t?t:-1)-1)%o)},title:"Prev"})))};d.displayName="SearchResultsBar";var u=Object(a.b)(e=>{var{ui:{selectedSearchMatchIndex:t,numberOfMatchesInNote:o}}=e;return{selectedSearchMatchIndex:t,numberOfMatchesInNote:o}},e=>({setSearchSelection:t=>e({type:"STORE_SEARCH_SELECTION",index:t})}))(d),h=o(845),p=o(6),g=o(271),m=o(175),v=Object(a.b)(null,e=>({openShareDialog:()=>e(Object(m.showDialog)("SHARE"))}))(e=>{var{openShareDialog:t}=e;return r.a.createElement("div",{className:"tag-email-tooltip"},r.a.createElement("div",{className:"tag-email-tooltip__arrow"}),r.a.createElement("div",{className:"tag-email-tooltip__inside"},"Collaboration has moved. Press the Share icon in the toolbar to access the ",r.a.createElement("a",{href:"#",onClick:t},"Collaborate screen"),"."))}),f=o(7),b=o.n(f),y=e=>{var{onSelect:t,selected:o,tagName:n}=e;return r.a.createElement("div",{className:b()("tag-chip",{selected:o}),"data-tag-name":n,onClick:t},n)};class S extends s.Component{constructor(){for(var e,t=arguments.length,o=new Array(t),n=0;n<t;n++)o[n]=arguments[n];super(...o),e=this,i()(this,"inputField",void 0),i()(this,"inputObserver",void 0),i()(this,"state",{isComposing:!1}),i()(this,"completeSuggestion",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.identity,{onChange:o,note:n,tags:i,value:s}=e.props;if(s.length){var r=null;for(var a of i.values())if(!n.tags.includes(a.name)&&a.name.startsWith(s)){r=a.name;break}r&&o(r,()=>{t(r),e.focusInput()})}})),i()(this,"focusInput",()=>{if(this.inputField){var e=this.inputField;e.focus();var t=document.createRange();t.selectNodeContents(e),t.collapse(!1);var o=window.getSelection();o.removeAllRanges(),o.addRange(t)}}),i()(this,"hasFocus",()=>document.activeElement===this.inputField),i()(this,"interceptKeys",e=>Object(p.invoke)({13:this.submitTag,188:this.submitTag,32:this.submitTag,9:this.interceptTabPress,39:this.interceptRightArrow},e.keyCode,e)),i()(this,"interceptRightArrow",e=>{var{value:t}=this.props;if(window.getSelection){var o=window.getSelection().getRangeAt(0),n=o.cloneRange();n.selectNodeContents(e.currentTarget),n.setEnd(o.endContainer,o.endOffset),n.toString().length===t.length&&(this.completeSuggestion(),e.preventDefault(),e.stopPropagation())}}),i()(this,"interceptTabPress",e=>{this.completeSuggestion(this.submitTag),e.preventDefault(),e.stopPropagation()}),i()(this,"onInputMutation",e=>{e.forEach(e=>{var t=Object(p.get)(e,"target.data","");"childList"===e.type&&e.addedNodes.length&&(t=Object(p.get)(e,"target.innerText","")),this.onInput(t)})}),i()(this,"onInput",e=>{this.state.isComposing||this.props.onChange(e.trim(),this.focusInput)}),i()(this,"onCompositionEnd",e=>{var t=e.target.textContent;this.setState({isComposing:!1},()=>this.onInput(t))}),i()(this,"removePastedFormatting",e=>{var t;Object(p.get)(e,"clipboardData.getData")?t=e.clipboardData.getData("text/plain"):Object(p.get)(window,"clipboardData.getData")&&(t=window.clipboardData.getData("Text")),this.onInput(t),e.preventDefault(),e.stopPropagation()}),i()(this,"storeInput",e=>{this.inputField=e,this.props.inputRef(e),Object(p.invoke)(this,"inputField.addEventListener","paste",this.removePastedFormatting,!1)}),i()(this,"submitTag",e=>{var{onSelect:t,value:o}=this.props;o.trim().length&&t(o.trim()),Object(p.invoke)(e,"preventDefault"),Object(p.invoke)(e,"stopPropagation")})}componentDidMount(){this.props.storeFocusInput(this.focusInput),this.props.storeHasFocus(this.hasFocus),this.inputObserver=new MutationObserver(this.onInputMutation),this.inputObserver.observe(this.inputField,{characterData:!0,childList:!0,subtree:!0})}componentWillUnmount(){Object(p.invoke)(this,"inputField.removeEventListener","paste",this.removePastedFormatting,!1),this.inputObserver.disconnect()}render(){var{note:e,tags:t,value:o}=this.props,n=null;if(o.length>0)for(var i of t.values())if(!e.tags.includes(i.name)&&i.name.startsWith(o)){n=i.name;break}var s=""===o&&!this.state.isComposing;return r.a.createElement("div",{className:"tag-input",onClick:this.focusInput},s&&r.a.createElement("span",{"aria-hidden":!0,className:"tag-input__placeholder theme-color-fg-dim"},"Add a tag…"),r.a.createElement("div",{"aria-label":"Add a tag…",ref:this.storeInput,className:"tag-input__entry",contentEditable:"true",onBlur:this.submitTag,onCompositionStart:()=>this.setState({isComposing:!0}),onCompositionEnd:this.onCompositionEnd,onKeyDown:this.interceptKeys,spellCheck:!1,suppressContentEditableWarning:!0},o),r.a.createElement("div",{className:"tag-input__suggestion",disabled:!0,type:"text"},n?n.substring(o.length):""))}}i()(S,"displayName","TagInput"),i()(S,"defaultProps",{inputRef:p.identity,onChange:p.identity,onSelect:p.identity,storeFocusInput:p.noop,storeHasFocus:p.noop});var C=Object(a.b)(e=>({note:e.data.notes.get(e.ui.openedNote),tags:e.data.tags}))(S),w=o(234);class E extends s.Component{constructor(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];super(...t),i()(this,"container",Object(s.createRef)()),i()(this,"focusInput",void 0),i()(this,"hiddenTag",void 0),i()(this,"inputHasFocus",void 0),i()(this,"tagInput",Object(s.createRef)()),i()(this,"state",{selectedTag:"",showEmailTooltip:!1,tagInput:""}),i()(this,"addTag",e=>{var{note:t,noteId:o}=this.props,n=e.trim().replace(/\s+/g,",").split(",");n.some(g.a)&&this.showEmailTooltip();var i=new Set(t.tags.map(w.a));n.forEach(e=>{i.has(Object(w.a)(e))||(i.add(Object(w.a)(e)),this.props.addTag(o,e))}),this.storeTagInput(""),Object(p.invoke)(this,"tagInput.focus")}),i()(this,"hasSelection",()=>this.state.selectedTag&&!!this.state.selectedTag.length),i()(this,"deleteTag",e=>{var{noteId:t}=this.props,{selectedTag:o}=this.state;this.props.removeTag(t,e),o===e&&this.setState({selectedTag:""},()=>{var e,t;return null===(e=this.tagInput)||void 0===e||null===(t=e.current)||void 0===t?void 0:t.focus()})}),i()(this,"deleteSelection",()=>{this.hasSelection()&&this.deleteTag(this.state.selectedTag)}),i()(this,"hideEmailTooltip",()=>this.setState({showEmailTooltip:!1})),i()(this,"hasFocus",()=>!!this.inputHasFocus&&this.inputHasFocus()),i()(this,"focusTagField",()=>this.focusInput&&this.focusInput()),i()(this,"interceptKeys",e=>{if(8===e.which){if(this.hasSelection()&&this.deleteSelection(),""!==this.state.tagInput)return;return this.selectLastTag(),void e.preventDefault()}if(39===e.which&&this.hasSelection())return this.unselect(e),void this.focusTagField();9===e.which&&this.hasSelection()&&this.unselect(e)}),i()(this,"preventStealingFocus",e=>{var{ctrlKey:t,key:o,metaKey:n,shiftKey:i}=e;if(this.props.keyboardShortcuts)return(t||n)&&i&&"y"===o.toLowerCase()&&this.setState({selectedTag:""}),!0}),i()(this,"selectLastTag",()=>{var e;return this.setState({selectedTag:null===(e=this.props.note)||void 0===e?void 0:e.tags.slice(-1).shift()})}),i()(this,"selectTag",e=>{var{currentTarget:{dataset:{tagName:t}}}=e;e.preventDefault(),e.stopPropagation(),this.deleteTag(t)}),i()(this,"showEmailTooltip",()=>{this.setState({showEmailTooltip:!0}),setTimeout(()=>this.setState({showEmailTooltip:!1}),5e3)}),i()(this,"onKeyDown",e=>(this.state.showEmailTooltip&&this.hideEmailTooltip(),this.interceptKeys(e))),i()(this,"storeFocusInput",e=>this.focusInput=e),i()(this,"storeHasFocus",e=>this.inputHasFocus=e),i()(this,"storeHiddenTag",e=>this.hiddenTag=e),i()(this,"storeInputRef",e=>this.tagInput=e),i()(this,"storeTagInput",(e,t)=>this.setState({tagInput:e},t)),i()(this,"unselect",e=>{var t;this.state.selectedTag&&(null===(t=this.hiddenTag)||void 0===t?void 0:t.current)!==e.relatedTarget&&this.setState({selectedTag:""})}),i()(this,"getTagName",e=>{var t;return null===(t=this.props.allTags.get(Object(w.a)(e)))||void 0===t?void 0:t.name})}componentDidMount(){this.props.storeFocusTagField(this.focusTagField),this.props.storeHasFocus(this.hasFocus),document.addEventListener("click",this.unselect,!0),window.addEventListener("keydown",this.preventStealingFocus,!0)}componentWillUnmount(){document.removeEventListener("click",this.unselect,!0),window.removeEventListener("keydown",this.preventStealingFocus,!0)}componentDidUpdate(){var e,t;this.hasSelection()&&(null===(e=this.hiddenTag)||void 0===e||null===(t=e.current)||void 0===t||t.focus())}render(){var{note:e}=this.props,{selectedTag:t,showEmailTooltip:o,tagInput:n}=this.state;return r.a.createElement("div",{ref:this.container,className:"tag-field"},r.a.createElement("div",{className:b()("tag-editor",{"has-selection":this.hasSelection()}),tabIndex:-1,onKeyDown:this.onKeyDown},r.a.createElement("input",{className:"hidden-tag",tabIndex:-1,ref:this.storeHiddenTag}),null==e?void 0:e.tags.filter(Object(p.negate)(g.a)).map(e=>r.a.createElement(y,{key:e,tagName:this.getTagName(e),selected:e===t,onSelect:this.selectTag})),r.a.createElement(C,{inputRef:this.storeInputRef,value:n,onChange:this.storeTagInput,onSelect:this.addTag,storeFocusInput:this.storeFocusInput,storeHasFocus:this.storeHasFocus}),r.a.createElement(h.a,{container:this.container.current,onHide:this.hideEmailTooltip,placement:"top",rootClose:!0,shouldUpdatePosition:!0,show:o,target:this.tagInput.current},()=>r.a.createElement(v,null))))}}i()(E,"displayName","TagField");var N=Object(a.b)(e=>({allTags:e.data.tags,keyboardShortcuts:e.settings.keyboardShortcuts,noteId:e.ui.openedNote,note:e.data.notes.get(e.ui.openedNote)}),{addTag:(e,t)=>({type:"ADD_NOTE_TAG",noteId:e,tagName:t}),removeTag:(e,t)=>({type:"REMOVE_NOTE_TAG",noteId:e,tagName:t})})(E),T=o(564),k=o(615),x=o(390),O=o(157),I=o(193),F=o(210),M=o(231),L=o(17),D=o(251);function A(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function R(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?A(Object(o),!0).forEach((function(t){i()(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):A(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var K=e=>({range:new monaco.Range(e,1,e,1),options:{isWholeLine:!0,inlineClassName:"note-title",stickiness:k.editor.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges}});class j extends s.Component{constructor(){super(...arguments),i()(this,"bootTimer",null),i()(this,"editor",null),i()(this,"monaco",null),i()(this,"contentDiv",Object(s.createRef)()),i()(this,"decorations",[]),i()(this,"matchesInNote",[]),i()(this,"state",{content:"",editor:"fast",noteId:null,overTodo:!1,searchQuery:""}),i()(this,"toggleShortcuts",e=>{e?window.addEventListener("keydown",this.handleShortcut,!0):window.removeEventListener("keydown",this.handleShortcut,!0)}),i()(this,"completionProvider",(e,t)=>({triggerCharacters:["["],provideCompletionItems(t,o,n,i){var s=t.getLineContent(o.lineNumber),r=s.lastIndexOf("[",o.column),a=s.lastIndexOf("]",o.column),l=r>=0&&a<r?r:-1,c=l>=0?s.slice(l+1,o.column):"",d=Object(x.b)({searchTerms:Object(F.a)(c),excludeIDs:e?[e]:[],openedTag:null,showTrash:!1,searchTags:Object(x.c)(c),titleOnly:!0},5).map(e=>{var[t,o]=e;return R({noteId:t,content:o.content,isPinned:o.systemTags.includes("pinned")},Object(M.c)(o))}),u=l>=0?[{text:"",range:{startLineNumber:o.lineNumber,startColumn:l,endLineNumber:o.lineNumber,endColumn:o.column}}]:[];return{incomplete:!0,suggestions:d.map((e,t)=>({additionalTextEdits:u,kind:e.isPinned?k.languages.CompletionItemKind.Snippet:k.languages.CompletionItemKind.File,label:e.title,documentation:e.content,insertText:"[".concat(e.title,"](simplenote://note/").concat(e.noteId,")"),sortText:t.toString(),range:{startLineNumber:o.lineNumber,startColumn:o.column,endLineNumber:o.lineNumber,endColumn:o.column}}))}}})),i()(this,"handleShortcut",e=>{var{ctrlKey:t,metaKey:o,shiftKey:n}=e,i=e.key.toLowerCase(),s=t||o;return s&&n&&"g"===i?(this.setPrevSearchSelection(),e.stopPropagation(),e.preventDefault(),!1):window.electron||!s||n||"g"!==i?void 0:(this.setNextSearchSelection(),e.stopPropagation(),e.preventDefault(),!1)}),i()(this,"setDecorators",()=>{var e,t;this.matchesInNote=null!==(e=this.searchMatches())&&void 0!==e?e:[],this.props.storeNumberOfMatchesInNote(this.matchesInNote.length);var o=null!==(t=this.getTitleDecoration())&&void 0!==t?t:[];this.decorations=this.editor.deltaDecorations(this.decorations,[...this.matchesInNote,...o])}),i()(this,"getTitleDecoration",()=>{var e=this.editor.getModel();if(e)for(var t=1;t<=e.getLineCount();t++){if(e.getLineContent(t).trim().length>0)return[K(t)]}}),i()(this,"searchMatches",()=>{if(this.editor&&this.props.searchQuery){var e=this.editor.getModel(),t=Object(F.a)(this.props.searchQuery).map(e=>e.normalize().toLowerCase()).filter(e=>e.trim().length>0);if(0===t.length)return[];var o=e.getValue().normalize().toLowerCase();return t.reduce((t,n)=>{for(var i=null,s=0;-1!==i&&-1!==(i=o.indexOf(n,s));){s=i+n.length;var r=e.getPositionAt(i),a=e.getPositionAt(i+n.length);t.push({options:{inlineClassName:"search-decoration",overviewRuler:{color:"#3361cc",position:k.editor.OverviewRulerLane.Full}},range:{startLineNumber:r.lineNumber,startColumn:r.column,endLineNumber:a.lineNumber,endColumn:a.column}})}return t},[])}}),i()(this,"focusEditor",()=>{var e;return null===(e=this.editor)||void 0===e?void 0:e.focus()}),i()(this,"hasFocus",()=>{var e;return null===(e=this.editor)||void 0===e?void 0:e.hasTextFocus()}),i()(this,"handleChecklist",e=>{var t;null===(t=this.editor)||void 0===t||t.trigger("editorCommand","insertChecklist",null)}),i()(this,"handleUndoRedo",e=>{var t,o;switch(e.inputType){case"historyUndo":return null===(t=this.editor)||void 0===t||t.trigger("browserMenu","undo",null),e.preventDefault(),void e.stopPropagation();case"historyRedo":return null===(o=this.editor)||void 0===o||o.trigger("browserMenu","redo",null),e.preventDefault(),void e.stopPropagation()}}),i()(this,"cancelSelectionOrSearch",e=>{this.props.searchQuery.length>0&&this.matchesInNote.length>0?this.props.clearSearch():e.trigger("customAction","cancelSelection",null)}),i()(this,"insertOrRemoveCheckboxes",e=>{var t=e.getSelection();if(t)for(var o=t.startLineNumber;o<=t.endLineNumber;o++)this.toggleChecklistForLine(e,o);else{var n=e.getPosition();if(!n)return;this.toggleChecklistForLine(e,n.lineNumber)}}),i()(this,"toggleChecklistForLine",(e,t)=>{var o,n,i=e.getModel();if(i){var s=i.getLineContent(t),r=/^(\s*)([-+*\u2022]\s*)?([\ue000\ue001]\s+)?/.exec(s);if(r){var[a,l,c,d]=r,u=void 0!==d,h=l.length+(null!==(o=null==c?void 0:c.length)&&void 0!==o?o:0)+1,p=u?"":" ",g={identifier:{major:1,minor:1},range:new this.monaco.Range(t,h,t,h+(null!==(n=null==d?void 0:d.length)&&void 0!==n?n:0)),text:p,forceMoveMarkers:!0};e.executeEdits("insertOrRemoveCheckboxes",[g]),this.props.insertTask()}}}),i()(this,"editorInit",e=>{k.editor.defineTheme("simplenote",{base:"vs",inherit:!0,rules:[{background:"FFFFFF",foreground:"#2c3338"}],colors:{"editor.foreground":"#2c3338","editor.background":"#ffffff","editor.selectionBackground":"#ced9f2","scrollbarSlider.activeBackground":"#8c8f94","scrollbarSlider.background":"#c3c4c7","scrollbarSlider.hoverBackground":"#a7aaad","textLink.foreground":"#1d4fc4"}}),k.editor.defineTheme("simplenote-dark",{base:"vs-dark",inherit:!0,rules:[{background:"1d2327",foreground:"ffffff"}],colors:{"editor.foreground":"#ffffff","editor.background":"#1d2327","editor.selectionBackground":"#50575e","scrollbarSlider.activeBackground":"#646970","scrollbarSlider.background":"#2c3338","scrollbarSlider.hoverBackground":"#1d2327","textLink.foreground":"#ced9f2"}})}),i()(this,"editorReady",(e,t)=>{var o,n,i;this.editor=e,this.monaco=t,t.languages.registerLinkProvider("plaintext",{provideLinks:e=>({links:e.findMatches("simplenote://note/[a-zA-Z0-9-]+",!0,!0,!1,null,!1).map(e=>{var{range:t}=e;return{range:t}})}),resolveLink:t=>{var o,n,i=null!==(o=null===(n=e.getModel())||void 0===n?void 0:n.getValueInRange(t.range))&&void 0!==o?o:"",s=/^simplenote:\/\/note\/(.+)$/.exec(i);if(s){var[r,a]=s;return this.props.notes.has(a)&&this.props.openNote(a),R(R({},t),{},{url:"#"})}}});var s=["cancelSelection","cursorUndo","editor.action.commentLine","editor.action.jumpToBracket","editor.action.transposeLetters","expandLineSelection","editor.action.gotoLine","editor.action.insertCursorAbove","editor.action.insertCursorBelow","editor.action.insertCursorAtEndOfEachLineSelected","actions.find","actions.findWithSelection","editor.action.addSelectionToNextFindMatch","editor.action.nextMatchFindAction","editor.action.selectHighlights"];window.electron&&L.b&&s.push("undo","redo","editor.action.selectAll"),s.forEach((function(t){e._standaloneKeybindingService.addDynamicKeybinding("-"+t,void 0,()=>{})})),e.createContextKey("allowBrowserKeybinding",!window.electron),e.addAction({id:"context_undo",label:"Undo",keybindings:[t.KeyMod.CtrlCmd|t.KeyCode.KEY_Z],keybindingContext:"allowBrowserKeybinding",contextMenuGroupId:"1_modification",contextMenuOrder:2,run:()=>{e.trigger("contextMenu","undo",null)}}),e.addAction({id:"context_redo",label:"Redo",keybindings:[t.KeyMod.WinCtrl|t.KeyCode.KEY_Y,t.KeyMod.CtrlCmd|t.KeyMod.Shift|t.KeyCode.KEY_Z],keybindingContext:"allowBrowserKeybinding",contextMenuGroupId:"1_modification",contextMenuOrder:3,run:()=>{e.trigger("contextMenu","redo",null)}}),e.addAction({id:"context_cut",label:"Cut",keybindings:[t.KeyMod.CtrlCmd|t.KeyCode.KEY_X],keybindingContext:"allowBrowserKeybinding",contextMenuGroupId:"9_cutcopypaste",contextMenuOrder:1,run:()=>{e.trigger("contextMenu","editor.action.clipboardCutAction",null)}}),e.addAction({id:"context_copy",label:"Copy",keybindings:[t.KeyMod.CtrlCmd|t.KeyCode.KEY_C],keybindingContext:"allowBrowserKeybinding",contextMenuGroupId:"9_cutcopypaste",contextMenuOrder:2,run:()=>{e.trigger("contextMenu","editor.action.clipboardCopyAction",null)}}),e.addAction({id:"cancel_selection",label:"Cancel Selection",keybindings:[t.KeyCode.Escape],keybindingContext:"!suggestWidgetVisible",run:this.cancelSelectionOrSearch}),window.electron&&e.addAction({id:"paste",label:"Paste",contextMenuGroupId:"9_cutcopypaste",contextMenuOrder:3,keybindings:[t.KeyMod.CtrlCmd|t.KeyCode.KEY_V],keybindingContext:"allowBrowserKeybinding",run:()=>{document.execCommand("paste")}}),e.addAction({id:"select_all",label:"Select All",contextMenuGroupId:"9_cutcopypaste",contextMenuOrder:4,keybindings:[t.KeyMod.CtrlCmd|t.KeyCode.KEY_A],keybindingContext:"allowBrowserKeybinding",run:()=>{e.setSelection(e.getModel().getFullModelRange())}}),e.addAction({id:"insertChecklist",label:"Insert Checklist",keybindings:[t.KeyMod.CtrlCmd|t.KeyMod.Shift|t.KeyCode.KEY_C],keybindingContext:"allowBrowserKeybinding",contextMenuGroupId:"10_checklist",contextMenuOrder:1,run:this.insertOrRemoveCheckboxes}),e.addAction({id:"selectUpWithoutMulticursor",label:"Select Up",keybindings:[t.KeyMod.CtrlCmd|t.KeyMod.Shift|t.KeyCode.UpArrow],run:()=>{e.trigger("shortcuts","cursorUpSelect",null)}}),e.addAction({id:"selectDownWithoutMulticursor",label:"Select Down",keybindings:[t.KeyMod.CtrlCmd|t.KeyMod.Shift|t.KeyCode.DownArrow],run:()=>{e.trigger("shortcuts","cursorDownSelect",null)}}),e.addCommand(t.KeyCode.Tab,()=>{var t,o,n=null===(t=e.getPosition())||void 0===t?void 0:t.lineNumber;if(n){var i=null===(o=e.getModel())||void 0===o?void 0:o.getLineContent(n);i&&/^(\s*)([-+*\u2022\ue000\ue001])(\s+)/.test(i)?e.trigger("commands","editor.action.indentLines",null):e.trigger("commands","tab",null)}}),null===(o=window.electron)||void 0===o||o.receive("editorCommand",t=>{switch(t.action){case"findAgain":return void this.setNextSearchSelection();case"insertChecklist":return void e.trigger("editorCommand","insertChecklist",null);case"redo":return void(e.hasTextFocus()?e.trigger("editorCommand","redo",null):document.execCommand("redo"));case"selectAll":return void(e.hasTextFocus()?e.setSelection(e.getModel().getFullModelRange()):document.execCommand("selectAll"));case"undo":return void(e.hasTextFocus()?e.trigger("editorCommand","undo",null):document.execCommand("undo"))}}),window.electron||window.addEventListener("input",this.handleUndoRedo,!0),this.setDecorators(),this.setState({}),e.onDidChangeModelContent(()=>this.setDecorators());var r=t.languages.registerCompletionItemProvider("plaintext",this.completionProvider(this.state.noteId,e));e.onDidDispose(()=>null==r?void 0:r.dispose()),t.languages.setLanguageConfiguration("plaintext",{wordPattern:/[^\s]+/g}),document.oncopy=e=>{e.clipboardData.setData("text/plain",Object(D.b)(e.clipboardData.getData("text/plain")))};var[a,l,c]=this.props.editorSelection,d=null===(n=this.editor.getModel())||void 0===n?void 0:n.getPositionAt(a),u=null===(i=this.editor.getModel())||void 0===i?void 0:i.getPositionAt(l);this.editor.setSelection(k.Selection.createWithDirection(null==d?void 0:d.lineNumber,null==d?void 0:d.column,null==u?void 0:u.lineNumber,null==u?void 0:u.column,"RTL"===c?k.SelectionDirection.RTL:k.SelectionDirection.LTR)),e.revealLine(d.lineNumber,k.editor.ScrollType.Immediate),e.onDidChangeCursorSelection(t=>{var o,n;if(t.reason!==k.editor.CursorChangeReason.Undo&&t.reason!==k.editor.CursorChangeReason.Redo){var i=null===(o=e.getModel())||void 0===o?void 0:o.getOffsetAt(t.selection.getStartPosition()),s=null===(n=e.getModel())||void 0===n?void 0:n.getOffsetAt(t.selection.getEndPosition()),r=t.selection.getDirection()===k.SelectionDirection.LTR?"LTR":"RTL";this.props.storeEditorSelection(this.props.noteId,i,s,r)}}),e.onMouseMove(t=>{var{content:o}=this.state,{target:{range:n}}=t;if(n&&!(n.endColumn-n.startColumn>1)){var i=e.getModel();if(i){var s=i.getOffsetAt({lineNumber:n.startLineNumber,column:n.startColumn}),r=""===o[s]||""===o[s];this.state.overTodo!==r&&this.setState({overTodo:r})}}}),e.onMouseDown(t=>{var{editNote:o,noteId:n}=this.props,{content:i}=this.state,{target:{range:s}}=t;if(s&&!(s.endColumn-s.startColumn>1)){var r=e.getModel();if(r){var a=r.getOffsetAt({lineNumber:s.startLineNumber,column:s.startColumn});""===i[a]?o(n,{content:Object(D.b)(i.slice(0,a)+""+i.slice(a+1))}):""===i[a]&&o(n,{content:Object(D.b)(i.slice(0,a)+""+i.slice(a+1))})}}})}),i()(this,"updateNote",(e,t)=>{var{editNote:o,noteId:n}=this.props;if(this.editor){var i=(()=>{if(this.editor&&!t.isRedoing&&!t.isUndoing){var o=t.changes.find(e=>{var{text:t}=e;return("\r"===t[0]||"\n"===t[0])&&""===t.trim()});if(o){var n=o.range.startLineNumber;if(0!==n&&n===o.range.endLineNumber){var i=this.editor.getModel(),s=i.getLineContent(n),r=/^(\s*)([-+*\u2022\ue000\ue001])(\s+)/.exec(s);if(null!==r){var a=i.getLineContent(n+1);if(/^\s*$/.test(a)){if(!(0===a.trim().length&&s.length===r[0].length)){var l=i.getOffsetAt({column:0,lineNumber:n+1}),c=i.getOffsetAt({column:0,lineNumber:n+2}),d={identifier:{major:1,minor:1},range:new this.monaco.Range(n+1,0,n+1,a.length),text:r[0].replace("",""),forceMoveMarkers:!0};return this.editor.executeEdits("autolist",[d]),Promise.resolve().then(()=>this.editor.setPosition({column:r[0].length+1,lineNumber:n+1})),e.slice(0,l)+r[0].replace("","")+t.eol+e.slice(c)}i.getOffsetAt({column:0,lineNumber:n}),i.getOffsetAt({column:0,lineNumber:n+1});var u={identifier:{major:1,minor:1},range:new this.monaco.Range(n,0,n+1,a.length+1),text:null,forceMoveMarkers:!0};Promise.resolve().then(()=>{this.editor.executeEdits("autolist",[u]),this.editor.setPosition({column:0,lineNumber:n})})}}}}}})()||e;o(n,{content:Object(D.b)(i)})}}),i()(this,"setNextSearchSelection",()=>{var{selectedSearchMatchIndex:e}=this.props,t=this.matchesInNote.length,o=(t+(null!=e?e:-1)+1)%t;this.props.storeSearchSelection(o),this.setSearchSelection(o)}),i()(this,"setPrevSearchSelection",()=>{var{selectedSearchMatchIndex:e}=this.props,t=this.matchesInNote.length,o=(t+(null!=e?e:t)-1)%t;this.props.storeSearchSelection(o),this.setSearchSelection(o)}),i()(this,"setSearchSelection",e=>{if(this.matchesInNote.length){var t=this.matchesInNote[e].range;this.editor.setSelection(t),this.editor.revealLineInCenter(t.startLineNumber),this.focusEditor()}})}static getDerivedStateFromProps(e,t){var o=e.note.content.length>5e3,n=e.note.content!==t.content,i=e.noteId!==t.noteId,s=n?i&&o?e.note.content.slice(0,e.editorSelection[1]+5e3):Object(D.a)(e.note.content):t.content,r=i?o?"fast":"full":t.editor,a=e.searchQuery!==t.searchQuery;return(i||a)&&e.storeSearchSelection(0),{content:s,editor:r,noteId:e.noteId,searchQuery:e.searchQuery}}componentDidMount(){var{noteId:e}=this.props;this.bootTimer=setTimeout(()=>{e===this.props.noteId&&this.setState({editor:"full",content:Object(D.a)(this.props.note.content)})},120),this.focusEditor(),this.props.storeFocusEditor(this.focusEditor),this.props.storeHasFocus(this.hasFocus),window.addEventListener("toggleChecklist",this.handleChecklist,!0),this.toggleShortcuts(!0)}componentWillUnmount(){var e;this.bootTimer&&clearTimeout(this.bootTimer),null===(e=window.electron)||void 0===e||e.removeListener("editorCommand"),window.removeEventListener("input",this.handleUndoRedo,!0),window.removeEventListener("toggleChecklist",this.handleChecklist,!0),this.toggleShortcuts(!1)}componentDidUpdate(e){var t,o,{editorSelection:[n,i,s]}=e,{editorSelection:[r,a,l]}=this.props;if(this.editor&&"full"===this.state.editor&&(n!==r||i!==a||s!==l)){var c,d,u=null===(c=this.editor.getModel())||void 0===c?void 0:c.getPositionAt(r),h=null===(d=this.editor.getModel())||void 0===d?void 0:d.getPositionAt(a);this.editor.setSelection(k.Selection.createWithDirection(null==u?void 0:u.lineNumber,null==u?void 0:u.column,null==h?void 0:h.lineNumber,null==h?void 0:h.column,"RTL"===l?k.SelectionDirection.RTL:k.SelectionDirection.LTR))}""===this.props.searchQuery&&""!==e.searchQuery&&(null===(t=this.editor)||void 0===t||t.setSelection(new this.monaco.Range(0,0,0,0)));(this.props.lineLength===e.lineLength&&this.props.isFocusMode===e.isFocusMode||setTimeout(()=>{this.editor&&this.editor.layout()},400),this.editor&&"full"===this.state.editor&&e.searchQuery!==this.props.searchQuery)&&(null===(o=this.editor)||void 0===o||o.layout(),this.setDecorators());this.editor&&"full"===this.state.editor&&e.selectedSearchMatchIndex!==this.props.selectedSearchMatchIndex&&this.setSearchSelection(this.props.selectedSearchMatchIndex)}render(){var e,{lineLength:t,noteId:o,searchQuery:n,theme:i}=this.props,{content:s,editor:a,overTodo:l}=this.state,c=(n&&this.searchMatches(),((e,t)=>"full"===e||void 0===t?25:t<=1072?.1*t:(t-768)/2)(t,null===(e=this.contentDiv.current)||void 0===e?void 0:e.offsetWidth));return r.a.createElement("div",{ref:this.contentDiv,className:"note-content-editor-shell".concat(l?" cursor-pointer":""),onClick:this.focusEditor},r.a.createElement("div",{className:"note-content-plaintext".concat("fast"===a?" visible":"")},s),"fast"!==a&&r.a.createElement(T.default,{key:o,editorDidMount:this.editorReady,editorWillMount:this.editorInit,language:"plaintext",theme:"dark"===i?"simplenote-dark":"simplenote",onChange:this.updateNote,options:{autoClosingBrackets:"never",autoClosingQuotes:"never",autoIndent:"keep",autoSurround:"never",automaticLayout:!0,codeLens:!1,folding:!1,fontFamily:'"Simplenote Tasks", -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen-Sans", "Ubuntu", "Cantarell", "Helvetica Neue", sans-serif',hideCursorInOverviewRuler:!0,lineDecorationsWidth:c,fontSize:16,lineHeight:24,lineNumbers:"off",links:!0,matchBrackets:"never",minimap:{enabled:!1},occurrencesHighlight:!1,overviewRulerBorder:!1,quickSuggestions:!1,renderIndentGuides:!1,renderLineHighlight:"none",scrollbar:{horizontal:"hidden",useShadows:!1,verticalScrollbarSize:c},scrollBeyondLastLine:!1,selectionHighlight:!1,suggestOnTriggerCharacters:!0,wordWrap:"bounded",wrappingStrategy:L.c?"simple":"advanced",wordWrapColumn:400},value:s}))}}var P={clearSearch:()=>O.a.ui.search(""),editNote:O.a.data.editNote,insertTask:()=>({type:"INSERT_TASK"}),openNote:O.a.ui.selectNote,storeEditorSelection:(e,t,o,n)=>({type:"STORE_EDITOR_SELECTION",noteId:e,start:t,end:o,direction:n}),storeNumberOfMatchesInNote:e=>({type:"STORE_NUMBER_OF_MATCHES_IN_NOTE",matches:e}),storeSearchSelection:e=>({type:"STORE_SEARCH_SELECTION",index:e})},_=Object(a.b)(e=>{var t;return{editorSelection:null!==(t=e.ui.editorSelection.get(e.ui.openedNote))&&void 0!==t?t:[0,0,"LTR"],isFocusMode:e.settings.focusModeEnabled,keyboardShortcuts:e.settings.keyboardShortcuts,lineLength:e.settings.lineLength,noteId:e.ui.openedNote,note:e.data.notes.get(e.ui.openedNote),notes:e.data.notes,searchQuery:e.ui.searchQuery,selectedSearchMatchIndex:e.ui.selectedSearchMatchIndex,spellCheckEnabled:e.settings.spellCheckEnabled,theme:I.a(e)}},P)(j),H=o(309);class W extends s.Component{constructor(){super(...arguments),i()(this,"focusEditor",()=>this.focusContentEditor&&this.focusContentEditor()),i()(this,"hasFocus",()=>{var e;return null===(e=this.editorHasFocus)||void 0===e?void 0:e.call(this)}),i()(this,"storeEditorHasFocus",e=>this.editorHasFocus=e),i()(this,"storeFocusContentEditor",e=>this.focusContentEditor=e)}componentDidMount(){this.props.storeFocusEditor(this.focusEditor),this.props.storeHasFocus(this.hasFocus)}render(){var{openedNote:e}=this.props;return r.a.createElement("div",{className:"note-detail-wrapper"},e?r.a.createElement(_,{key:e,storeFocusEditor:this.storeFocusContentEditor,storeHasFocus:this.storeEditorHasFocus}):r.a.createElement("div",{className:"note-detail-placeholder"},r.a.createElement(H.a,null)))}}i()(W,"displayName","NoteDetail");var B=Object(a.b)(e=>({isDialogOpen:e.ui.dialogs.length>0,keyboardShortcuts:e.settings.keyboardShortcuts,openedNote:e.ui.openedNote}))(W),Q=o(457);class U extends s.Component{constructor(){super(...arguments),i()(this,"markdownEnabled",()=>{var e;return null===(e=this.props.note)||void 0===e?void 0:e.systemTags.includes("markdown")}),i()(this,"handleShortcut",e=>{if(this.props.keyboardShortcuts){var t,o,{ctrlKey:n,metaKey:i,shiftKey:s}=e,r=e.key.toLowerCase(),{note:a,noteId:l,toggleMarkdown:c}=this.props,d=n||i;return a&&d&&s&&"m"===r?(c(l,!this.markdownEnabled()),e.stopPropagation(),e.preventDefault(),!1):d&&s&&"p"===r&&this.markdownEnabled()?(this.props.toggleEditMode(),e.stopPropagation(),e.preventDefault(),!1):!(s&&d&&"y"===r&&this.props.isEditorActive)||(!this.editFieldHasFocus()||this.props.isSearchActive?(null===(t=this.focusNoteEditor)||void 0===t||t.call(this),e.stopPropagation(),e.preventDefault(),!1):(null===(o=this.focusTagField)||void 0===o||o.call(this),e.stopPropagation(),e.preventDefault(),!1))}}),i()(this,"editFieldHasFocus",()=>this.editorHasFocus&&this.editorHasFocus()),i()(this,"storeEditorHasFocus",e=>this.editorHasFocus=e),i()(this,"storeFocusEditor",e=>this.focusNoteEditor=e),i()(this,"storeFocusTagField",e=>this.focusTagField=e),i()(this,"storeTagFieldHasFocus",e=>this.tagFieldHasFocus=e),i()(this,"tagFieldHasFocus",()=>this.tagFieldHasFocus&&this.tagFieldHasFocus()),i()(this,"toggleShortcuts",e=>{e?window.addEventListener("keydown",this.handleShortcut,!0):window.removeEventListener("keydown",this.handleShortcut,!0)})}componentDidMount(){this.toggleShortcuts(!0)}componentWillUnmount(){this.toggleShortcuts(!1)}render(){var{editMode:e,hasSearchQuery:t,hasSearchMatchesInNote:o,note:n,noteId:i}=this.props;if(!n)return r.a.createElement("div",{className:"note-detail-placeholder"},r.a.createElement(H.a,null));var s=!!n.deleted;return r.a.createElement("div",{className:"note-editor theme-color-bg theme-color-fg"},e||!n.systemTags.includes("markdown")?r.a.createElement(B,{storeFocusEditor:this.storeFocusEditor,storeHasFocus:this.storeEditorHasFocus}):r.a.createElement(Q.default,{noteId:i}),n&&!s&&r.a.createElement(N,{storeFocusTagField:this.storeFocusTagField,storeHasFocus:this.storeTagFieldHasFocus}),t&&o&&r.a.createElement(u,null))}}i()(U,"displayName","NoteEditor");var G={toggleNoteList:O.a.ui.toggleNoteList,toggleMarkdown:O.a.data.markdownNote,toggleEditMode:O.a.ui.toggleEditMode};t.default=Object(a.b)(e=>({allTags:e.data.tags,editMode:e.ui.editMode,keyboardShortcuts:e.settings.keyboardShortcuts,isEditorActive:!e.ui.showNavigation,noteId:e.ui.openedNote,note:e.data.notes.get(e.ui.openedNote),revision:e.ui.selectedRevision,hasSearchQuery:""!==e.ui.searchQuery,hasSearchMatchesInNote:!!e.ui.numberOfMatchesInNote&&e.ui.numberOfMatchesInNote>0,isSearchActive:!!e.ui.searchQuery.length,isSmallScreen:I.b(e)}),G)(U)}}]);